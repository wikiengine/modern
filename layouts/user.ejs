<%
let isLoggedIn = session.account.type == 1;
%>
<%if(session.gravatar_url) {%>
    <button class="w-9 h-9 rounded-full flex items-center justify-center">
    <img class="rounded-full" src="<%=session.gravatar_url%>"/>
</button>
<%} else {%>
    <button class="w-9 h-9 rounded-full bg-gray-500 text-white flex items-center justify-center">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user">
            <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/>
            <circle cx="12" cy="7" r="4"/>
        </svg>
    </button>
<%}%>
<div class="uk-drop uk-dropdown min-w-40" data-uk-dropdown="mode: click">
    <ul class="uk-dropdown-nav uk-nav">
        <li class="uk-nav-header">
            <%if (isLoggedIn) {%>
                <b class="text-xl"><%=session.account.name%></b><br>Member
            <%} else {%>
                <b class="text-xl">session.account.name%></b><br>IP
            <%}%>
        </li>
        <li class="uk-nav-divider"></li>
        <li>
            <a href="#" class="dropdown-item" @click.prevent="$store.state.openSettingModal">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user-cog"><circle cx="18" cy="15" r="3"/><circle cx="9" cy="7" r="4"/><path d="M10 15H6a4 4 0 0 0-4 4v2"/><path d="m21.7 16.4-.9-.3"/><path d="m15.2 13.9-.9-.3"/><path d="m16.6 18.7.3-.9"/><path d="m19.1 12.2.3-.9"/><path d="m19.6 18.7-.4-1"/><path d="m16.8 12.3-.4-1"/><path d="m14.3 16.6 1-.4"/><path d="m20.7 13.8 1-.4"/></svg>&nbsp;설정
            </a>
            <a x-show="$store.state.currentTheme === 'light'" href="#" class="dropdown-item" @click.prevent="$store.state.setLocalConfig('wiki.theme', 'dark')">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-moon"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></svg>&nbsp;다크 테마로
            </a>
            <a x-show="$store.state.currentTheme === 'dark'" href="#" class="dropdown-item" @click.prevent="$store.state.setLocalConfig('wiki.theme', 'light')">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun"><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>&nbsp;라이트 테마로
            </a>
        </li>
        <li class="uk-nav-divider"></li>
        <%if (isLoggedIn) {%>
            <li>
                <a href="/member/mypage" class="dropdown-item">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-info"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>&nbsp;내 정보
                </a>
            </li>
            <li>
                <a :href="doc_action_link(user_doc($store.state.session.account.name), 'w')">내 사용자 문서</a>
            </li>
            <li>
                <a href="/member/starred_documents">내 문서함</a>
            </li> 
            <li class="uk-nav-divider"></li>
        <%}%>
        <%if(session.account.uuid) {%>
            <li>
                <a class="dropdown-item" :href="contribution_link($store.state.session.account.uuid)">내 문서 기여 목록</a>
            </li>
            <li>
                <a class="dropdown-item" :href="contribution_link_discuss($store.state.session.account.uuid)">내 토론 기여 목록</a>
            </li>
            <li class="uk-nav-divider"></li>
        <%}%>
        <%if (isLoggedIn) {%>
            <li>
                <a href="/member/logout" data-add-redirect>로그아웃</a>
            </li>
        <%} else {%>
            <li>
                <a href="/member/login" data-add-redirect>로그인</a>
            </li>
        <%}%>
    </ul>
</div>